<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="dark light" />
  <title>AI Card Sort - Habs AI Hub</title>
  <link rel="stylesheet" href="css/global.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root{
      /* Use site colors where possible */
      --brand: #3b82f6; /* matches .btn-primary gradient hue */
      --fine: #16a34a;
      --notfine: #dc2626;
      --grey: #6b7280;
      --ring: rgba(59,130,246,.45);
      --shadow: 0 10px 30px rgba(0,0,0,.25);
      --radius: 14px;
    }

    /* Layout wrappers (use site structure) */
    .content-wide { max-width: 1200px; }

    /* Page-specific glass panels */
    .columns{display:grid; gap:16px; grid-template-columns: repeat(3, minmax(260px, 1fr)); align-items:start}
    .col{
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.15);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding:14px; min-height: 300px; display:flex; flex-direction:column;
      backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
    }
    /* Color-coded top accents for columns */
    .col.fine{ border-top: 4px solid var(--fine); }
    .col.notfine{ border-top: 4px solid var(--notfine); }
    .col.grey{ border-top: 4px solid var(--grey); }

    .col h2{margin:4px 4px 10px; font-size:18px; display:flex; align-items:center; justify-content:space-between; color:#e5e7eb}
    .badge{font-size:12px; color:#fff; padding:4px 8px; border-radius:999px}
    .fine .badge{background:var(--fine)}
    .notfine .badge{background:var(--notfine)}
    .grey .badge{background:var(--grey)}

    .dropzone{
      min-height:220px; flex:1;
      border:2px dashed rgba(255,255,255,0.14);
      border-radius:12px; padding:10px; transition:border-color .2s, background .2s;
      display:grid; gap:10px;
      background: rgba(255,255,255,0.03);
    }
    .dropzone.dragover{border-color:var(--brand); background: rgba(59,130,246,0.08)}

    /* Single-card deck for Unsorted: only top card visible */
    #unsorted.dropzone{
      display:flex; align-items:center; justify-content:center;
      min-height: 260px; padding:20px; position:relative;
    }
    #unsorted .card{ transform: translateZ(0); transition: transform .18s ease, box-shadow .18s ease; margin:0; max-width: 820px; width: 100%; }
    #unsorted .card:hover, #unsorted .card:focus{ transform: translateY(-2px); box-shadow: 0 14px 36px rgba(0,0,0,.35); }
    #unsorted .card:not(:first-child){ display:none; }

    .card{
      background: rgba(255,255,255,0.08);
      border:1px solid rgba(255,255,255,0.18);
      border-radius:12px; padding:12px;
      box-shadow: 0 8px 24px rgba(0,0,0,.25);
      cursor:grab; user-select:none; color:#e5e7eb;
      backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px);
    }
    .card[aria-grabbed="true"]{opacity:.9; transform:rotate(.4deg); cursor:grabbing}
    .card p{margin:0; white-space:pre-wrap}
    .card .helper{display:flex; gap:6px; margin-top:10px; flex-wrap:wrap}

    /* Quick action chips styled like subtle buttons */
    .chip{
      font-size:12px; padding:6px 10px; border-radius:999px; cursor:pointer;
      background: rgba(255,255,255,0.06);
      color:#cbd5e1; border:1px solid rgba(255,255,255,0.22);
      transition: background .15s ease, color .15s ease;
    }
    .chip:hover{background: rgba(255,255,255,0.12); color:#fff}
    .chip:focus{outline:2px solid var(--ring); outline-offset:2px}

    .footer-note{font-size:12px; color:#94a3b8; margin-top:14px}
    .counts{font-size:12px; color:#94a3b8}

    .toolbar{display:flex; gap:10px; justify-content:center; flex-wrap:wrap; margin-top:18px}

    /* Visually hidden utility */
    .sr-only{position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0}

    @media (max-width: 900px){ .columns{grid-template-columns: 1fr} }

    /* Print */
    @media print{
      .page-header, .toolbar{display:none}
      .page-container{background:#fff}
      .col{break-inside:avoid; background:#fff; border:1px solid #e5e7eb; box-shadow:none}
      .dropzone{border:1px dashed #e5e7eb; background:#fff}
      .card{background:#fff; color:#111; border:1px solid #e5e7eb; box-shadow:none}
      /* Show all unsorted cards on print */
      #unsorted .card{ display:block !important; }
    }
  </style>
  <!-- Accessibility note for native form controls in dark UI -->
  <style>
    .page-container, .chip { color-scheme: dark; }
  </style>
  <!-- Fallback if a browser ignores color-scheme for options -->
  <script>
    (function(){
      try{ var opt = document.createElement('option'); opt.style.color = '#111'; }catch(e){}
    })();
  </script>
</head>
<body>
  <div class="page-container">
    <div class="page-header">
      <h1 class="page-title">AI Card Sort</h1>
      <p class="page-subtitle">Drag each card into one of the three categories: <strong>Fine</strong>, <strong>Not Fine</strong>, or <strong>Grey</strong>.</p>

      <div class="toolbar" role="group" aria-label="Actions">
        <button class="btn btn-primary" id="shuffleBtn" title="Shuffle the unsorted pile">Shuffle</button>
        <button class="btn btn-secondary" id="resetBtn" title="Return all cards to the unsorted pile">Reset</button>
        <button class="btn btn-secondary" id="printBtn" title="Print or save to PDF">Print</button>
      </div>
    </div>

    <div class="content-section content-wide" aria-label="Sorting area">
      <!-- Deck (Unsorted) at the top -->
      <section style="margin-bottom:18px">
        <h2 style="font-size:18px; margin:0 0 8px; color:#e5e7eb">Unsorted</h2>
        <span id="focus-top" class="sr-only" tabindex="-1">Top</span>
        <div class="dropzone" id="unsorted" aria-label="Unsorted cards" role="list"></div>
        <p class="footer-note" id="help">
          Tip: Keyboard works too — select a card with <kbd>Tab</kbd>. Press <kbd>Enter</kbd>/<kbd>Space</kbd> to move it to the next column
          (Unsorted → Fine → Not Fine → Grey → Unsorted). Or press <kbd>1</kbd>/<kbd>F</kbd> (<em>Fine</em>), <kbd>2</kbd>/<kbd>N</kbd> (<em>Not Fine</em>), <kbd>3</kbd>/<kbd>G</kbd> (<em>Grey</em>).
        </p>
      </section>

      <section class="columns" aria-label="Sorting columns">
        <div class="col fine" data-col="fine" aria-label="Fine">
          <h2>Fine <span class="badge" id="count-fine">0</span></h2>
          <div class="dropzone" id="fine" role="list" aria-describedby="help"></div>
        </div>
        <div class="col notfine" data-col="notfine" aria-label="Not Fine">
          <h2>Not Fine <span class="badge" id="count-notfine">0</span></h2>
          <div class="dropzone" id="notfine" role="list" aria-describedby="help"></div>
        </div>
        <div class="col grey" data-col="grey" aria-label="Grey">
          <h2>Grey <span class="badge" id="count-grey">0</span></h2>
          <div class="dropzone" id="grey" role="list" aria-describedby="help"></div>
        </div>
      </section>
    </div>

    <footer class="hub-footer">
      <p>2025 Habs AI Hub • <a href="index.html">Back to Home</a></p>
    </footer>
  </div>

  <script>
  (function(){
    // --- Data (editable) ---
    const statements = [
      "I ask AI to quiz me so I can test myself.\n\nFor instance: I get it to ask me short-answer questions on Macbeth.",
      "I paste my work in and get AI to tidy it up.\n\nFor instance: It adds subheadings and bullet points to my essay draft.",
      "I use AI to help me write an email.\n\nFor instance: I ask it to make my email to a teacher sound polite.",
      "I get AI to make me a revision timetable.\n\nFor instance: It plans two hours a day across all my GCSE subjects.",
      "I ask AI to make exam questions.\n\nFor instance: It writes multiple-choice questions on photosynthesis.",
      "I get AI to check my spelling and grammar.\n\nFor instance: I paste in coursework to spot typos before handing it in.",
      "I use AI to come up with ideas.\n\nFor instance: It gives me topics for my geography project.",
      "I ask AI to summarise something long.\n\nFor instance: It reduces a news article into bullet points.",
      "I get AI to make me a vocab list.\n\nFor instance: 20 French words about holidays.",
      "I ask AI to explain something I don’t get.\n\nFor instance: It explains quadratic equations step by step.",
      "I practise languages by chatting with AI.\n\nFor instance: Ordering food in Spanish.",
      "I copy AI answers straight into homework.\n\nFor instance: I paste the capital of Brazil without looking it up myself.",
      "I use AI to do coursework for me.\n\nFor instance: Copying a whole essay on climate change.",
      "I chat to AI like it’s my friend.\n\nFor instance: Talking to it about how I’m feeling.",
      "I ask AI to re-write my sentences.\n\nFor instance: Making my writing sound more formal.",
      "I use AI to solve maths problems.\n\nFor instance: It gives me the answer but I don’t know the method.",
      "I get AI to fill in a form for me.\n\nFor instance: It writes answers for a school captain application.",
      "I use AI for sentence starters.\n\nFor instance: “On the other hand…” or “In conclusion…”",
      "I get AI to plan my essay.\n\nFor instance: Introduction, three main points, conclusion.",
      "I look up background information for an essay.\n\nFor instance: Using AI to get an overview of the causes of the Cold War before doing research.",
      "I find sources to use in coursework.\n\nFor instance: Asking AI to suggest historians who have written about Elizabethan England.",
      "I check if my research is reliable.\n\nFor instance: Comparing what AI says with a textbook or website.",
      "I practise how to write introductions.\n\nFor instance: Getting AI to show me three different ways to start an essay on global warming.",
      "I improve my note-taking.\n\nFor instance: Putting a science article into AI and asking for a summary in note form.",
      "I get AI to explain feedback from a teacher.\n\nFor instance: Copying a teacher’s comment into AI to help me understand what “evaluate” means.",
      "I make revision flashcards.\n\nFor instance: AI creates digital Q&A; cards on key vocabulary in biology.",
      "I turn my notes into a quiz.\n\nFor instance: AI makes ten short-answer questions from my history notes.",
      "I check if my essay structure makes sense.\n\nFor instance: AI looks at my plan and suggests if the points are in the right order.",
      "I explore different viewpoints.\n\nFor instance: Asking AI to explain both sides of the argument about nuclear power.",
      "I practise critical thinking with AI.\n\nFor instance: Asking AI to give me an answer I then challenge or disagree with.",
      "I plan a group project with AI.\n\nFor instance: Using AI to suggest roles and tasks for a science presentation.",
      "I draft a bibliography.\n\nFor instance: AI formats a list of books and websites into Harvard style."
    ];

    const ZORDER = ["unsorted","fine","notfine","grey"];
    const LS_KEY = "ai-card-sort-v2";

    const zones = {
      unsorted: document.getElementById("unsorted"),
      fine: document.getElementById("fine"),
      notfine: document.getElementById("notfine"),
      grey: document.getElementById("grey"),
    };
    const counts = {
      fine: document.getElementById("count-fine"),
      notfine: document.getElementById("count-notfine"),
      grey: document.getElementById("count-grey"),
    };

    // id factory
    const uid = (() => { let i = 0; return () => `card-${++i}`; })();

    function save(){
      const data = {};
      Object.keys(zones).forEach(k => {
        data[k] = Array.from(zones[k].children).map(el => ({
          id: el.id,
          text: el.dataset.text
        }));
      });
      data.ts = Date.now();
      try{ localStorage.setItem(LS_KEY, JSON.stringify(data)); }catch(e){}
      updateCounts();
    }

    function load(){
      try{
        const s = localStorage.getItem(LS_KEY);
        if(!s) return false;
        const data = JSON.parse(s);
        Object.keys(zones).forEach(k => zones[k].innerHTML = "");
        ZORDER.forEach(k => (data[k] || []).forEach(item => zones[k].appendChild(makeCard(item.text, item.id))));
        updateCounts();
        return true;
      }catch(e){ return false; }
    }

    function updateCounts(){
      counts.fine.textContent = zones.fine.children.length;
      counts.notfine.textContent = zones.notfine.children.length;
      counts.grey.textContent = zones.grey.children.length;
    }

    function makeCard(text, fixedId){
      const el = document.createElement("div");
      el.className = "card";
      el.tabIndex = 0;
      el.setAttribute("role","listitem");
      el.draggable = true;
      el.id = fixedId || uid();
      el.dataset.text = text;

      const p = document.createElement("p");
      p.textContent = text;
      el.appendChild(p);

      const helper = document.createElement("div");
      helper.className = "helper";
      helper.innerHTML = `
        <button class="chip" data-move="fine" title="Send to Fine (1 or F)">Fine</button>
        <button class="chip" data-move="notfine" title="Send to Not Fine (2 or N)">Not&nbsp;Fine</button>
        <button class="chip" data-move="grey" title="Send to Grey (3 or G)">Grey</button>
      `;
      el.appendChild(helper);

      // Drag handlers
      el.addEventListener("dragstart", e => {
        e.dataTransfer.setData("text/id", el.id);
        e.dataTransfer.effectAllowed = "move";
        el.setAttribute("aria-grabbed","true");
      });
      el.addEventListener("dragend", () => el.removeAttribute("aria-grabbed"));

      // Keyboard: Enter/Space cycles; 1/2/3/F/N/G direct
      el.addEventListener("keydown", e => {
        const key = e.key.toLowerCase();
        if(key === " " || key === "enter"){
          e.preventDefault();
          const parentId = el.parentElement.id;
          const idx = Math.max(0, ZORDER.indexOf(parentId));
          const dest = ZORDER[(idx + 1) % ZORDER.length];
          moveCard(el, dest);
        }else if(key === "1" || key === "f"){
          moveCard(el, "fine");
        }else if(key === "2" || key === "n"){
          moveCard(el, "notfine");
        }else if(key === "3" || key === "g"){
          moveCard(el, "grey");
        }
      });

      // Quick move buttons
      helper.querySelectorAll("[data-move]").forEach(btn => {
        btn.addEventListener("click", () => {
          const dest = btn.getAttribute("data-move");
          moveCard(el, dest);
        });
      });

      return el;
    }

    function focusDeck(){
      const topCard = zones.unsorted.firstElementChild;
      if(topCard && typeof topCard.focus === 'function'){
        try{ topCard.focus({ preventScroll: true }); }catch(e){ topCard.focus(); }
      }else{
        const anchor = document.getElementById('focus-top');
        if(anchor && typeof anchor.focus === 'function'){
          try{ anchor.focus({ preventScroll: true }); }catch(e){ anchor.focus(); }
        }
      }
    }

    function moveCard(cardEl, destId){
      zones[destId].appendChild(cardEl);
      save();
      // Keep viewport anchored at the top deck for rapid sorting
      focusDeck();
    }

    // Dropzone handlers
    Object.values(zones).forEach(zone => {
      zone.addEventListener("dragover", e => {
        e.preventDefault(); zone.classList.add("dragover"); e.dataTransfer.dropEffect = "move";
      });
      zone.addEventListener("dragleave", () => zone.classList.remove("dragover"));
      zone.addEventListener("drop", e => {
        e.preventDefault();
        zone.classList.remove("dragover");
        const id = e.dataTransfer.getData("text/id");
        const card = document.getElementById(id);
        if(card) zone.appendChild(card);
        save();
        // Return focus to the deck to avoid viewport jumping down
        focusDeck();
      });
    });

    // Initial render (load from storage or use defaults)
    function init(){
      if(!load()){
        zones.unsorted.innerHTML = "";
        statements.forEach(s => zones.unsorted.appendChild(makeCard(s)));
        updateCounts();
        save();
      }else{
        updateCounts();
      }
    }

    // Controls
    document.getElementById("shuffleBtn").addEventListener("click", () => {
      const items = Array.from(zones.unsorted.children);
      for(let i = items.length - 1; i > 0; i--){
        const j = Math.floor(Math.random() * (i + 1));
        zones.unsorted.insertBefore(items[j], items[i]);
      }
      focusDeck();
    });
    document.getElementById("resetBtn").addEventListener("click", () => {
      const all = [
        ...zones.fine.children, ...zones.notfine.children, ...zones.grey.children
      ];
      all.forEach(el => zones.unsorted.appendChild(el));
      updateCounts();
      save();
      focusDeck();
    });
    // Export removed per requirements
    document.getElementById("printBtn").addEventListener("click", () => window.print());

    // Observe changes to update counts
    const obs = new MutationObserver(updateCounts);
    Object.values(zones).forEach(z => obs.observe(z, {childList:true}));

    init();
  })();
  </script>
</body>
</html>
